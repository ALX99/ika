ika:
  gracefulShutdownTimeout: 1s

servers:
  - addr: :8888

namespaces:
  root:
    req-modifiers:
      - name: req-modifier
        config:
          host: http://httpbun-local
    paths:
      /headers: {}
  testns1.com: &testns1
    req-modifiers:
      - name: req-modifier
        config:
          host: http://httpbun-local

    middlewares:
    - name: accessLog

    paths:
      /any: {}
      /get:
        req-modifiers:
          - &any-rewrite
            name: req-modifier
            config:
              path: /any
      /only-get:
        methods: [GET]
        req-modifiers:
          - *any-rewrite
      /httpbun/{any...}:
        req-modifiers:
          - name: req-modifier
            config:
              path: /{any...}
      /wildcard-rewrite/{any...}:
        req-modifiers:
          - name: req-modifier
            config:
              path: "/any/{any...}"
      /path-rewrite/{a1}/{a2}:
        req-modifiers:
          - name: req-modifier
            config:
              path: "/any/{a1}/{a2}"
      /not-terminated/{any}/:
        methods: [GET]
        req-modifiers:
          - *any-rewrite
      /terminated/{any}/{$}:
        methods: [GET]
        req-modifiers:
          - *any-rewrite

  /testns1:
    <<: *testns1

  /testns2:
    req-modifiers:
      - name: req-modifier
        config:
          host: http://httpbun-local
    middlewares:
    - name: accessLog
    paths:
      /any/{any...}: {}

  passthrough.com: &passthrough
    req-modifiers:
      - name: req-modifier
        config:
          host: http://httpbun-local
    middlewares:
    - name: accessLog
    paths:
      "": {}
      "/": {}

  /passthrough:
    <<: *passthrough
